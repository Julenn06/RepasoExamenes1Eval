â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   ğŸ“š MÃ‰TODOS CLAVE FIREBASE - CRUD COMPLETO                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  1ï¸âƒ£  CREATE - CREAR UN DOCUMENTO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

public boolean crear(Alumno alumno) {
    try {
        // 1. Crear referencia a nuevo documento (Firebase genera ID automÃ¡tico)
        DocumentReference docRef = db.collection(COLLECTION).document();
        
        // 2. Asignar el ID generado al objeto alumno
        alumno.setId(docRef.getId());
        
        // 3. Convertir alumno a Map<String, Object> para Firebase
        Map<String, Object> data = alumnoToMap(alumno);
        
        // 4. Guardar datos en Firestore (operaciÃ³n asÃ­ncrona)
        ApiFuture<WriteResult> result = docRef.set(data);
        result.get(); // â† Espera a que se complete la escritura
        
        System.out.println("âœ“ Alumno creado con ID: " + alumno.getId());
        return true;
        
    } catch (Exception e) {
        System.err.println("âœ— Error al crear alumno: " + e.getMessage());
        return false;
    }
}

/* CONCEPTOS CLAVE:
   - DocumentReference: Referencia a un documento especÃ­fico
   - .document(): Sin parÃ¡metro = ID automÃ¡tico generado por Firebase
   - .set(data): Crea o sobreescribe el documento completo
   - ApiFuture<WriteResult>: Promesa de que la escritura se completarÃ¡
*/


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  2ï¸âƒ£  READ ALL - LEER TODOS LOS DOCUMENTOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

public List<Alumno> leerTodos() {
    List<Alumno> alumnos = new ArrayList<>();
    try {
        // 1. Iniciar consulta para obtener toda la colecciÃ³n
        ApiFuture<QuerySnapshot> future = db.collection(COLLECTION).get();
        
        // 2. Esperar y obtener resultado (QuerySnapshot contiene todos los docs)
        QuerySnapshot querySnapshot = future.get();
        
        // 3. Iterar sobre cada documento
        for (QueryDocumentSnapshot doc : querySnapshot.getDocuments()) {
            // 4. Convertir documento a objeto Alumno
            Alumno alumno = mapToAlumno(doc);
            
            if (alumno != null) {
                alumnos.add(alumno);
            }
        }
        
        System.out.println("âœ“ Se encontraron " + alumnos.size() + " alumnos");
        
    } catch (Exception e) {
        System.err.println("âœ— Error al leer alumnos: " + e.getMessage());
    }
    return alumnos;
}

/* CONCEPTOS CLAVE:
   - QuerySnapshot: Resultado de una consulta (mÃºltiples documentos)
   - .getDocuments(): Lista de todos los documentos encontrados
   - QueryDocumentSnapshot: Un documento individual del resultado
   - Devuelve lista vacÃ­a si hay error (no rompe el programa)
*/


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  3ï¸âƒ£  READ BY ID - LEER UN DOCUMENTO ESPECÃFICO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

public Alumno leerPorId(String id) {
    try {
        // 1. Obtener referencia al documento especÃ­fico por su ID
        DocumentReference docRef = db.collection(COLLECTION).document(id);
        
        /* ALTERNATIVA (mÃ¡s lenta, no recomendada):
         * DocumentReference docRef = db.collection(COLLECTION)
         *     .whereEqualTo("id", id)
         *     .get().get()
         *     .getDocuments()
         *     .get(0)
         *     .getReference();
         */
        
        // 2. Obtener el documento (operaciÃ³n asÃ­ncrona)
        ApiFuture<DocumentSnapshot> future = docRef.get();
        DocumentSnapshot document = future.get();
        
        // 3. Verificar si el documento existe
        if (document.exists()) {
            // 4. Convertir documento a objeto Alumno
            Alumno alumno = mapToAlumno(document);
            System.out.println("âœ“ Alumno encontrado: " + alumno.getNombreCompleto());
            return alumno;
            
        } else {
            System.out.println("âœ— No se encontrÃ³ alumno con ID: " + id);
        }
        
    } catch (Exception e) {
        System.err.println("âœ— Error al leer alumno: " + e.getMessage());
    }
    return null;
}

/* CONCEPTOS CLAVE:
   - DocumentSnapshot: Un Ãºnico documento (puede existir o no)
   - .document(id): Acceso directo por ID del documento
   - .exists(): Verifica si el documento existe en Firestore
   - DocumentReference vs DocumentSnapshot:
     * Reference = direcciÃ³n/puntero al documento
     * Snapshot = contenido real del documento
*/


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  4ï¸âƒ£  UPDATE - ACTUALIZAR UN DOCUMENTO EXISTENTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

public boolean actualizar(Alumno alumno) {
    try {
        // 1. Obtener referencia al documento existente
        DocumentReference docRef = db.collection(COLLECTION).document(alumno.getId());
        
        // 2. Convertir alumno actualizado a Map
        Map<String, Object> data = alumnoToMap(alumno);
        
        // 3. Actualizar solo los campos especificados (no sobrescribe todo)
        ApiFuture<WriteResult> result = docRef.update(data);
        result.get(); // â† Espera a que se complete la actualizaciÃ³n
        
        System.out.println("âœ“ Alumno actualizado: " + alumno.getNombreCompleto());
        return true;
        
    } catch (Exception e) {
        System.err.println("âœ— Error al actualizar alumno: " + e.getMessage());
        return false;
    }
}

/* CONCEPTOS CLAVE:
   - .update(data): Actualiza campos especÃ­ficos (mantiene otros campos)
   - .set(data): Sobrescribe el documento completo
   - Diferencia update vs set:
     * update: Solo modifica campos enviados
     * set: Reemplaza todo el documento (borra campos no enviados)
*/


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  5ï¸âƒ£  DELETE - ELIMINAR UN DOCUMENTO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

public boolean eliminar(String id) {
    try {
        // 1. Eliminar documento directamente por ID
        ApiFuture<WriteResult> result = db.collection(COLLECTION).document(id).delete();
        result.get(); // â† Espera a que se complete la eliminaciÃ³n
        
        System.out.println("âœ“ Alumno eliminado con ID: " + id);
        return true;
        
    } catch (Exception e) {
        System.err.println("âœ— Error al eliminar alumno: " + e.getMessage());
        return false;
    }
}

/* CONCEPTOS CLAVE:
   - .delete(): Elimina el documento completo
   - No lanza error si el documento no existe
   - Las subcolecciones NO se eliminan automÃ¡ticamente
   - WriteResult contiene el timestamp de la operaciÃ³n
*/


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ“Š RESUMEN DE OPERACIONES FIREBASE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OPERACIÃ“N   â”‚ MÃ‰TODO FIREBASE          â”‚ TIPO DE FUTURE                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CREATE      â”‚ docRef.set(data)         â”‚ ApiFuture<WriteResult>         â”‚
â”‚ READ ALL    â”‚ collection.get()         â”‚ ApiFuture<QuerySnapshot>       â”‚
â”‚ READ BY ID  â”‚ document(id).get()       â”‚ ApiFuture<DocumentSnapshot>    â”‚
â”‚ UPDATE      â”‚ docRef.update(data)      â”‚ ApiFuture<WriteResult>         â”‚
â”‚ DELETE      â”‚ document(id).delete()    â”‚ ApiFuture<WriteResult>         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ”‘ DIFERENCIAS CLAVE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ QuerySnapshot vs DocumentSnapshot
â”œâ”€ QuerySnapshot:  Resultado de consulta (mÃºltiples documentos)
â”‚  â””â”€ MÃ©todos: .getDocuments(), .size(), .isEmpty()
â”‚
â””â”€ DocumentSnapshot: Un Ãºnico documento
   â””â”€ MÃ©todos: .exists(), .getData(), .getString(), .getLong()

ğŸ”— DocumentReference vs DocumentSnapshot
â”œâ”€ DocumentReference: "DirecciÃ³n" del documento (puntero)
â”‚  â””â”€ MÃ©todos: .get(), .set(), .update(), .delete()
â”‚
â””â”€ DocumentSnapshot: "Contenido" del documento (datos)
   â””â”€ MÃ©todos: .exists(), .getData(), .toObject()

â³ ApiFuture Pattern
â”œâ”€ 1. ApiFuture<T> future = operaciÃ³n();  // Inicia operaciÃ³n asÃ­ncrona
â””â”€ 2. T resultado = future.get();         // Espera y obtiene resultado

ğŸ“ .set() vs .update()
â”œâ”€ .set(data):    Sobrescribe TODO el documento
â””â”€ .update(data): Solo actualiza campos especificados


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  âš ï¸  MANEJO DE ERRORES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… PATRÃ“N RECOMENDADO:
try {
    ApiFuture<T> future = operaciÃ³n();
    T resultado = future.get(); // Puede lanzar InterruptedException, ExecutionException
    
    // Procesar resultado...
    
} catch (Exception e) {
    System.err.println("âœ— Error: " + e.getMessage());
    // Devolver valor por defecto (null, false, lista vacÃ­a, etc.)
}

âŒ EVITAR:
- Propagar excepciones con throws (peor experiencia usuario)
- Hacer .get().get() sin separar (difÃ­cil de leer)
- No validar .exists() antes de acceder a documento


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ“š RECURSOS ADICIONALES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Firebase Admin SDK: https://firebase.google.com/docs/admin/setup
Firestore Java API: https://googleapis.dev/java/google-cloud-firestore/latest/
Query Examples: https://firebase.google.com/docs/firestore/query-data/queries